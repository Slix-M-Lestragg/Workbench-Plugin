/* Add styles for settings tabs */
.wb-settings-tab-header-container {
  display: flex;
  width: 100%;
  border-bottom: 1px solid var(--background-modifier-border);
  margin-bottom: var(--size-4-4); /* Add some space below tabs */
}

.wb-settings-tab-header {
  flex-grow: 1; /* Make tabs fill the width */
  padding: var(--size-4-2) var(--size-4-4);
  cursor: pointer;
  text-align: center;
  border-bottom: 2px solid transparent; /* Placeholder for active indicator */
  margin-bottom: -1px; /* Overlap container border */
  transition: border-color 0.1s ease-in-out, color 0.1s ease-in-out;
}

.wb-settings-tab-header:hover {
  color: var(--text-normal); /* Slightly highlight on hover */
}

.wb-settings-tab-header.wb-active {
  color: var(--text-accent);
  border-bottom-color: var(--interactive-accent); /* Active tab indicator */
}

.wb-settings-tab-content {
  /* Styles for content panes if needed, e.g., padding */
  padding-top: var(--size-4-2);
}

/* Hide inactive content panes by default (handled by JS adding/removing wb-active and display style) */
/* .wb-settings-tab-content:not(.wb-active) { */
  /* display: none; */ /* JS now handles show/hide directly */
/* } */

/* Styles for JSON Viewer */
.json-view-container {
  height: 100%;
  overflow: auto; /* Allow scrolling for large JSON */
  padding: var(--size-4-4); /* Add padding to the container */
}

/* Style the code block rendered by MarkdownRenderer */
.json-view-container .markdown-rendered pre > code.language-json {
  /* Obsidian's default code block styling might be sufficient */
  /* You can add overrides here if needed */
  font-size: var(--font-ui-small); /* Example: Ensure consistent font size */
  white-space: pre; /* Ensure whitespace is preserved */
}

/* Remove default pre margin if Obsidian adds it */
.json-view-container .markdown-rendered pre {
   margin: 0;
   /* Consider setting background if needed, though theme should handle it */
   /* background-color: var(--code-background); */
}


.json-view-error {
  color: var(--text-error);
  /* padding: var(--size-4-4); /* Padding now on container */
  font-weight: bold;
  margin-bottom: var(--size-4-2); /* Space between error and raw code */
}

/* Style the fallback raw code block */
.json-view-container > pre {
    margin-top: var(--size-4-2);
}

.json-view-container > pre > code {
  color: var(--text-muted); /* Dim the raw code if there was an error */
  font-family: var(--font-monospace);
  font-size: var(--font-ui-small);
  white-space: pre;
}

/* Animation for Busy Status Icon */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.comfy-busy-icon .lucide-loader {
  animation: spin 1s linear infinite;
}

/* Ensure icon alignment is good in status bar */
.status-bar-item .status-bar-icon {
    display: inline-flex; /* Helps with vertical alignment */
    align-items: center;
}

/* --- Status Popover Styles --- */
.wb-status-popover {
  padding: var(--size-4-2) var(--size-4-4); /* Consistent padding */
  min-width: 250px; /* Ensure a minimum width */
  background-color: var(--background-secondary);
  border: 1px solid var(--background-modifier-border);
  border-radius: var(--radius-m);
  box-shadow: var(--shadow-l);
  display: flex;
  flex-direction: column;
  gap: var(--size-4-2); /* Spacing between sections */
}

.wb-popover-section {
  padding-top: var(--size-4-2);
  border-top: 1px solid var(--background-modifier-border);
}
.wb-popover-section:first-child { /* No border for the very first section (header) */
    padding-top: 0;
    border-top: none;
}
.wb-popover-header {
    border-top: none; /* Ensure header never has top border */
    padding-top: 0;
}


.wb-popover-row {
  display: flex;
  align-items: center;
  justify-content: space-between; /* Distribute space */
  gap: var(--size-4-2); /* Spacing within a row */
  min-height: var(--input-height); /* Align height */
  font-size: var(--font-ui-small);
}

.wb-popover-header {
    justify-content: flex-start; /* Align header items to the start */
    gap: var(--size-4-3);
}

.wb-popover-title-label {
    font-weight: var(--font-semibold);
    color: var(--text-muted);
}

.wb-popover-status-text {
    font-weight: var(--font-bold);
    margin-right: auto; /* Push button to the right */
}

.wb-popover-header-button {
    margin-left: auto; /* Ensure button stays right */
}

/* Status Text Colors */
.wb-status-disconnected, .wb-status-error { color: var(--text-error); }
.wb-status-connecting, .wb-status-launching { color: var(--text-accent); }
.wb-status-ready { color: var(--text-success); }
.wb-status-busy { color: var(--text-warning); }


.wb-stat-label {
  color: var(--text-muted);
  flex-shrink: 0; /* Prevent labels from shrinking */
  min-width: 40px; /* Give labels some minimum space */
  text-align: right;
}

.wb-stat-value {
  font-weight: var(--font-semibold);
  flex-grow: 1; /* Allow value to take up space */
  text-align: left;
  white-space: nowrap; /* Prevent wrapping */
  overflow: hidden;
  text-overflow: ellipsis; /* Add ellipsis if too long */
}

.wb-stat-spacer {
    width: var(--size-4-4); /* Add space between stat pairs */
    flex-shrink: 0;
}

.wb-gpu-row .wb-stat-label {
    min-width: 45px; /* Slightly wider for GPU0: */
}

.wb-prompt-id {
    font-family: var(--font-monospace);
}

.wb-loading-text,
.wb-muted-text {
    color: var(--text-muted);
    font-style: italic;
}
.wb-error-text {
    color: var(--text-error);
}

/* --- Progress Bar Styles --- */

.wb-progress-bar {
    flex-grow: 1; /* Allow progress bar to take available space */
    height: 8px; /* Adjust height */
    margin: 0 var(--size-4-1); /* Add some horizontal margin */
    vertical-align: middle; /* Align with text */
    accent-color: var(--interactive-accent); /* Use theme accent color */
    border-radius: var(--radius-s);
    overflow: hidden; /* Ensure rounded corners clip the bar */
}
/* Style the bar itself */
.wb-progress-bar::-webkit-progress-bar {
    background-color: var(--background-modifier-hover);
    border-radius: var(--radius-s);
}
.wb-progress-bar::-webkit-progress-value {
    background-color: var(--interactive-accent);
    border-radius: var(--radius-s);
    transition: width 0.1s ease-out; /* Smooth transition */
}
/* Firefox */
.wb-progress-bar::-moz-progress-bar {
    background-color: var(--interactive-accent);
    border-radius: var(--radius-s);
    transition: width 0.1s ease-out;
}

.wb-progress-text {
    min-width: 60px; /* Ensure space for "100 / 100" */
    text-align: right;
    flex-shrink: 0;
    font-family: var(--font-monospace);
}
